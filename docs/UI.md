# Setsuna - UI/UX仕様書

## 概要

Setsunaのユーザーインターフェースとユーザー体験の仕様を定義します。

## デザイン原則

1. **シンプル**: 余計な要素を排除し、テキスト共有に集中
2. **スピーディ**: 最小限のステップで目的を達成
3. **レスポンシブ**: スマホでもPCでも快適に使用可能
4. **アクセシブル**: 誰でも使いやすいUI

---

## カラーパレット

| 用途 | カラー | Tailwind |
|------|--------|----------|
| プライマリ | #3B82F6 | `blue-500` |
| プライマリホバー | #2563EB | `blue-600` |
| 背景 | #F9FAFB | `gray-50` |
| カード背景 | #FFFFFF | `white` |
| テキスト | #111827 | `gray-900` |
| サブテキスト | #6B7280 | `gray-500` |
| ボーダー | #E5E7EB | `gray-200` |
| 成功 | #10B981 | `emerald-500` |
| エラー | #EF4444 | `red-500` |
| 警告 | #F59E0B | `amber-500` |

---

## タイポグラフィ

| 要素 | サイズ | ウェイト | Tailwind |
|------|--------|----------|----------|
| ロゴ | 2rem | Bold | `text-3xl font-bold` |
| 見出し1 | 1.5rem | Semibold | `text-2xl font-semibold` |
| 見出し2 | 1.25rem | Semibold | `text-xl font-semibold` |
| 本文 | 1rem | Normal | `text-base` |
| 小テキスト | 0.875rem | Normal | `text-sm` |
| キャプション | 0.75rem | Normal | `text-xs` |

---

## 画面構成

### 1. ホームページ (`/`)

アプリのエントリーポイント。ルームの作成または参加を行います。

```
┌────────────────────────────────────────────────────────┐
│                                                        │
│                        Setsuna                         │
│              デバイス間でテキストを共有                 │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│    ┌────────────────────────────────────────────┐     │
│    │                                            │     │
│    │          新しいルームを作成                │     │
│    │                                            │     │
│    │   ルームを作成してコードを共有すると、    │     │
│    │   別のデバイスからアクセスできます        │     │
│    │                                            │     │
│    │        ┌──────────────────────┐           │     │
│    │        │   ルームを作成する   │           │     │
│    │        └──────────────────────┘           │     │
│    │                                            │     │
│    └────────────────────────────────────────────┘     │
│                                                        │
│                     ─── または ───                     │
│                                                        │
│    ┌────────────────────────────────────────────┐     │
│    │                                            │     │
│    │          既存のルームに参加                │     │
│    │                                            │     │
│    │   ルームコード:                           │     │
│    │   ┌──────────────────────────────────┐   │     │
│    │   │  A 1 B 2 C 3                     │   │     │
│    │   └──────────────────────────────────┘   │     │
│    │                                            │     │
│    │        ┌──────────────────────┐           │     │
│    │        │     参加する         │           │     │
│    │        └──────────────────────┘           │     │
│    │                                            │     │
│    └────────────────────────────────────────────┘     │
│                                                        │
└────────────────────────────────────────────────────────┘
```

#### コンポーネント

| コンポーネント | 説明 |
|----------------|------|
| ロゴ | アプリ名「Setsuna」とサブタイトル |
| RoomCreator | ルーム作成カード |
| RoomJoiner | ルーム参加カード |

#### インタラクション

1. 「ルームを作成する」クリック → API呼び出し → ルームページへ遷移
2. ルームコード入力 → 「参加する」クリック → ルームページへ遷移
3. コード入力は6文字自動大文字変換

---

### 2. ルームページ (`/room/[code]`)

テキストの送受信を行うメイン画面。

```
┌────────────────────────────────────────────────────────┐
│  ← 戻る              A1B2C3              📋 コピー    │
│                   残り: 23:45:30                       │
├────────────────────────────────────────────────────────┤
│                                                        │
│   ┌────────────────────────────────────────────────┐  │
│   │                                                │  │
│   │  テキストを入力...                            │  │
│   │                                                │  │
│   │                                                │  │
│   │                                                │  │
│   │                                                │  │
│   └────────────────────────────────────────────────┘  │
│                                                        │
│          ┌────────────────────────────┐               │
│          │        送信する            │               │
│          └────────────────────────────┘               │
│                                                        │
├────────────────────────────────────────────────────────┤
│                                                        │
│   共有されたテキスト                                   │
│                                                        │
│   ┌────────────────────────────────────────────────┐  │
│   │                                            📋  │  │
│   │  これは共有されたテキストです。               │  │
│   │  複数行にわたる長いテキストも                 │  │
│   │  そのまま表示されます。                       │  │
│   │                                                │  │
│   │                                    10:30:45   │  │
│   └────────────────────────────────────────────────┘  │
│                                                        │
│   ┌────────────────────────────────────────────────┐  │
│   │                                            📋  │  │
│   │  もう一つのメッセージ                         │  │
│   │                                                │  │
│   │                                    10:28:30   │  │
│   └────────────────────────────────────────────────┘  │
│                                                        │
│   ┌────────────────────────────────────────────────┐  │
│   │                                            📋  │  │
│   │  最初のメッセージ                             │  │
│   │                                                │  │
│   │                                    10:25:00   │  │
│   └────────────────────────────────────────────────┘  │
│                                                        │
└────────────────────────────────────────────────────────┘
```

#### ヘッダー

| 要素 | 説明 |
|------|------|
| 戻るボタン | ホームページへ戻る |
| ルームコード | 現在のルームコード表示 |
| コピーボタン | ルームURL/コードをコピー |
| 残り時間 | 有効期限までのカウントダウン |

#### コンポーネント

| コンポーネント | 説明 |
|----------------|------|
| MessageInput | テキスト入力エリア |
| MessageList | メッセージ一覧 |
| MessageItem | 個別メッセージカード |
| CopyButton | クリップボードコピー |

#### インタラクション

1. テキスト入力 → 「送信する」クリック/Ctrl+Enter → メッセージ送信
2. メッセージのコピーボタン → クリップボードにコピー → トースト表示
3. 新しいメッセージはリアルタイムで上部に追加（アニメーション付き）
4. ルームコードコピー → 共有用URLをコピー

---

## コンポーネント仕様

### Button

```tsx
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'outline';
  size: 'sm' | 'md' | 'lg';
  disabled?: boolean;
  loading?: boolean;
  children: React.ReactNode;
  onClick?: () => void;
}
```

#### バリエーション

| バリアント | スタイル |
|------------|----------|
| primary | 青背景、白文字 |
| secondary | グレー背景、ダーク文字 |
| outline | 白背景、青ボーダー、青文字 |

### Input

```tsx
interface InputProps {
  type: 'text' | 'password';
  placeholder?: string;
  value: string;
  onChange: (value: string) => void;
  maxLength?: number;
  error?: string;
}
```

### Card

```tsx
interface CardProps {
  title?: string;
  children: React.ReactNode;
  className?: string;
}
```

### Toast

```tsx
interface ToastProps {
  message: string;
  type: 'success' | 'error' | 'info';
  duration?: number; // デフォルト: 3000ms
}
```

---

## レスポンシブデザイン

### ブレークポイント

| 名前 | 幅 | 対象デバイス |
|------|-----|--------------|
| sm | 640px | スマートフォン横向き |
| md | 768px | タブレット |
| lg | 1024px | ラップトップ |
| xl | 1280px | デスクトップ |

### レイアウト調整

#### ホームページ

| 画面サイズ | レイアウト |
|------------|------------|
| モバイル | カード縦並び、フル幅 |
| タブレット以上 | カード横並び、中央寄せ |

#### ルームページ

| 画面サイズ | レイアウト |
|------------|------------|
| モバイル | 入力エリア上部固定、メッセージリストスクロール |
| タブレット以上 | 入力エリアとメッセージリスト左右分割も検討 |

---

## アニメーション

### トランジション

| 要素 | アニメーション | 時間 |
|------|----------------|------|
| ボタンホバー | 背景色変化 | 150ms |
| カードホバー | シャドウ強調 | 200ms |
| 新メッセージ | フェードイン + スライドダウン | 300ms |
| トースト | スライドイン → スライドアウト | 300ms |

### Tailwindクラス

```css
/* トランジション */
.transition-colors { transition-property: color, background-color, border-color; }
.duration-150 { transition-duration: 150ms; }
.duration-200 { transition-duration: 200ms; }
.duration-300 { transition-duration: 300ms; }

/* アニメーション */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out;
}
```

---

## アクセシビリティ

### キーボード操作

| キー | 動作 |
|------|------|
| Tab | 次のフォーカス要素へ |
| Shift + Tab | 前のフォーカス要素へ |
| Enter | ボタンクリック、フォーム送信 |
| Ctrl + Enter | テキストエリアから送信 |
| Escape | モーダル/トースト閉じる |

### ARIA属性

```tsx
// ボタン例
<button
  aria-label="メッセージをクリップボードにコピー"
  aria-pressed={copied}
>
  <ClipboardIcon />
</button>

// 入力フィールド例
<input
  aria-label="ルームコード"
  aria-invalid={!!error}
  aria-describedby={error ? 'code-error' : undefined}
/>

// リアルタイム更新通知
<div
  aria-live="polite"
  aria-atomic="true"
>
  新しいメッセージが届きました
</div>
```

### カラーコントラスト

- テキスト/背景のコントラスト比: 4.5:1以上（WCAG AA準拠）
- 大きなテキスト: 3:1以上

---

## エラー状態

### フォームエラー

```
┌────────────────────────────────────────┐
│  ルームコード:                         │
│  ┌────────────────────────────────┐   │
│  │  XXXXX_                        │   │  ← 赤ボーダー
│  └────────────────────────────────┘   │
│  ⚠ 6文字の英数字で入力してください     │  ← 赤テキスト
└────────────────────────────────────────┘
```

### 接続エラー

```
┌────────────────────────────────────────┐
│  ⚠ 接続が切断されました                │
│     再接続を試みています...             │
│                                        │
│     [再接続する]                        │
└────────────────────────────────────────┘
```

### ルーム期限切れ

```
┌────────────────────────────────────────┐
│                                        │
│            ⏰ ルームの期限切れ          │
│                                        │
│     このルームは有効期限が切れました。  │
│     新しいルームを作成してください。    │
│                                        │
│         [新しいルームを作成]            │
│                                        │
└────────────────────────────────────────┘
```

---

## ローディング状態

### ボタンローディング

```tsx
<button disabled className="opacity-50 cursor-not-allowed">
  <Spinner className="animate-spin mr-2" />
  作成中...
</button>
```

### ページローディング

```
┌────────────────────────────────────────┐
│                                        │
│                                        │
│              ⟳ 読み込み中...           │
│                                        │
│                                        │
└────────────────────────────────────────┘
```

### メッセージスケルトン

```
┌────────────────────────────────────────┐
│  ███████████████████████████      📋  │
│  ████████████████                     │
│  ██████████████████████               │
│                           ████████    │
└────────────────────────────────────────┘
```

---

## 成功フィードバック

### コピー完了トースト

```
┌────────────────────────────────┐
│  ✓ クリップボードにコピーしました  │
└────────────────────────────────┘
```

### メッセージ送信完了

- 送信ボタンが一瞬緑色に変化
- 入力エリアがクリア
- 新しいメッセージがリストに追加（アニメーション付き）

---

## 関連ドキュメント

- [全体仕様書](./SPEC.md)
- [API仕様書](./API.md)
- [データベース仕様書](./DB.md)
